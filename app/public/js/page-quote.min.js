// @import components/eventsManager
// @import components/standalone
// @import components/links
// @import components/result
// @import components/Spinner
// @import components/Request
var pageQuote={element:document.getElementsByTagName("form")[0],request:new Request(""),spinner:new Spinner,inputs:{},set sending(e){this.element.className=e?"sending":"",e?this.spinner.show():this.spinner.hide();for(var t in this.inputs)this.inputs[t].blur()},clear:function(){for(var e in this.inputs)this.inputs[e].value=""},send:function(){var e=this;this.sending=!0,this.request.success(function(t){e.sending=!1,result.set(t.message),t.status&&e.clear(),this.sending=!1}).error(function(t){e.sending=!1,t?result.set(t.message):result.set("Erreur du serveur"),this.sending=!1}).send({quote:!0,author:this.inputs.author.value,email:this.inputs.email.value,content:this.inputs.content.value})},onsubmit:function(e){this.send(),e.preventDefault()},init:function(){var e=this;this.request.json=!0,this.request.method="post";for(var t=[this.element.getElementsByTagName("input"),this.element.getElementsByTagName("textarea")],s=0;s<t.length;s++)for(var n=t[s],i=0;i<n.length;i++){var u=n[i];"submit"!=u.type&&(this.inputs[u.name]=u)}this.element.on("submit",function(t){e.onsubmit(t)})}};pageQuote.init();