var sched={element:document.getElementsByClassName("sched")[0].getElementsByClassName("days")[0],url:"/api/sched",request:new Request,urlFor:function(e,t,n,a){return a=void 0!==a&&""!=a&&"Aucun"!=a&&a,this.url+"/"+e+"/"+t+"/"+n+(a?"/"+a:"")},get:function(e,t,n,a,r){this.request.url=this.urlFor(e,t,n,a),this.request.success(function(e){e.status?r(e.status,e.sched):r(e.status,e)}).error(function(){r(response.status,"Erreur r√©seau")}).send()},compute:{duration:function(e){var t=60*(e.timeslot.end.hour-e.timeslot.begin.hour);return t-=e.timeslot.begin.minute,t+=e.timeslot.end.minute,t/=api.minuteInterval}},constructor:{insert:function(e){for(var t=0,n=0;n<api.days.length;n++){var a=api.days[n];Array.isArray(e[a])&&(sched.element.appendChild(this.day(e[a],a)),t++)}sched.element.setAttribute("data-week-length",t)},day:function(e,t){var n=document.createElement("article"),a=document.createElement("span"),r=document.createElement("div");n.className="day",a.className="name",r.className="courses",n.appendChild(a),n.appendChild(r),a.appendChild(document.createTextNode(t));for(var s={hour:api.hourBegin,minute:0},i=0;i<e.length;i++){var o=e[i];if(s.minute!=o.timeslot.begin.minute)if(s.hour==o.timeslot.begin.hour)for(var u=s.minute;u<o.timeslot.begin.minute;u+=api.minuteInterval)r.appendChild(this.hour(s.hour,u));else{for(var u=s.minute;u<60;u+=api.minuteInterval)r.appendChild(this.hour(s.hour,u));s.hour++}for(s.hour;s.hour<o.timeslot.begin.hour;s.hour++)for(var u=0;u<60;u+=api.minuteInterval)r.appendChild(this.hour(s.hour,u));r.appendChild(this.course(o)),s.hour=o.timeslot.end.hour,s.minute=o.timeslot.end.minute}return n},hour:function(e,t){var n=document.createElement("div");return n.className="hour",0!=t&&(n.className+=" minute"),t==api.middleMinute&&(n.className+=" middle"),n},course:function(e){var t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("p"),r=document.createElement("span");if(t.className="course",t.setAttribute("data-parallel-courses",e.parallelCourses),t.setAttribute("data-parallel-factor",e.parallelFactor),t.setAttribute("data-duration",sched.compute.duration(e)),t.setAttribute("data-negative",e.negative),0!=e.timeslot.begin.minute&&e.timeslot.begin.minute!=api.middleMinute||t.setAttribute("data-begin-hour",!0),n.className="content",n.style.background=e.color,a.className="name",a.appendChild(r),r.appendChild(document.createTextNode(e.name)),t.appendChild(n),n.appendChild(a),e.professors.length>0||null!==e.classroom){var s=document.createElement("div");if(s.className="infos",n.appendChild(s),e.professors.length>0){var i=document.createElement("div");i.className="professors",s.appendChild(i);for(var o=0;o<e.professors.length;o++){var u=document.createElement("span");u.appendChild(document.createTextNode(e.professors[o])),i.appendChild(u)}}if(null!==e.classroom){var l=document.createElement("div");l.className="classroom",s.appendChild(l),l.appendChild(document.createTextNode(e.classroom))}}var d=e.timeslot.begin.hour+"h"+e.timeslot.begin.minute;return d+=" - "+e.timeslot.end.hour+"h"+e.timeslot.end.minute,t.setAttribute("data-dev-timeslot",d),t}},init:function(){this.request.json=!0}};sched.init();