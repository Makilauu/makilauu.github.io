// @import components/eventsManager
// @import components/Request
// @import components/result
// @import components/sched
// @import components/Spinner
// @import components/scroll
// @import components/Swipe
// @import components/standalone
// @import components/links
var pageSched={spinner:new Spinner,swipe:new Swipe,days:document.getElementsByClassName("days")[0],breakpoint:1060,mobile:!1,defaultDaySet:!1,message:{element:document.createElement("span"),all:["Remerciez Satellys pour la latence...","Non, les cours ne sont pas annulés...","Ne partez pas ça devrait arriver..."],get random(){return this.all[Math.floor(Math.random()*(this.all.length-1))]},set:function(){this.element.innerHTML="",this.element.appendChild(document.createTextNode(this.random))},init:function(){pageSched.spinner.element.appendChild(this.element)}},set loading(e){document.body.className=e?"loading":"",this.message.set(),e?this.spinner.show():this.spinner.hide()},update:function(e){this.form.update(),this.get(this.form.year,this.form.week,this.form.group,this.form.filter,e)},clear:function(){this.days.innerHTML=""},form:{element:document.getElementsByTagName("form")[0],filters:document.getElementsByTagName("form")[0].getElementsByClassName("filters")[0],inputs:{get filter(){return pageSched.form.filters.getElementsByClassName("visible")[0].getElementsByTagName("select")[0]}},get group(){return this.inputs.group.value},get year(){return this.inputs.year.value},get week(){return this.inputs.week.value},get filter(){return this.inputs.filter.value},update:function(){for(var e=this.filters.getElementsByClassName("visible"),t=0;t<e.length;t++)e[t].className="";var i=document.getElementById("sched-filter-"+api.filters[this.group]);i||(i=document.getElementById("sched-filter-none")),i.parentNode.className="visible"},onchange:function(){pageSched.update()},init:function(){for(var e=this.element.getElementsByTagName("select"),t=0;t<e.length;t++){var i=e[t];"sched-filter-"!=i.id.substring(0,13)&&(this.inputs[i.id.substr(6)]=i),i.on("change",this.onchange)}}},get:function(e,t,i,n,s){var a=this;this.loading=!0,"function"!=typeof s&&(s=function(){}),sched.get(e,t,i,n,function(e,t){e?(a.clear(),sched.constructor.insert(t.days),s()):result.set(t.message),a.loading=!1})},onresize:function(e){window.innerWidth>this.breakpoint&&(this.mobile||e===!0)?(this.swipe.page=0,this.swipe.disabled=!0,this.mobile=!1):window.innerWidth<this.breakpoint&&!this.mobile&&(this.defaultDaySet||(this.swipe.page=(new Date).getDay()-1,this.defaultDaySet=!0),this.mobile=!0,this.swipe.disabled=!1)},init:function(){var e=this;on("resize",function(){e.onresize()}),this.swipe.element=this.days,this.swipe.init(),this.message.init(),this.form.init(),this.update(function(){e.onresize(!0)})}};pageSched.init();