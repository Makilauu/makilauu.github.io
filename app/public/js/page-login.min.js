// @import components/eventsManager
// @import components/Request
// @import components/result
// @import components/Spinner
// @import components/standalone
var pageLogin={form:{element:document.getElementById("login"),spinner:new Spinner,request:new Request("/api/login"),get data(){return{institute:document.getElementById("login-institute").value,username:document.getElementById("login-username").value,password:document.getElementById("login-password").value}},set logging(e){this.element.className=e?"logging":"",e?this.spinner.show():this.spinner.hide(),document.getElementById("login-institute").blur(),document.getElementById("login-username").blur(),document.getElementById("login-password").blur()},clear:function(){document.getElementById("login-username").value="",document.getElementById("login-password").value="",document.getElementById("login-username").focus()},success:function(e){e.status?window.location.reload():(pageLogin.form.logging=!1,pageLogin.form.clear(),result.set(e.message))},error:function(e){result.set("Erreur r√©seau")},send:function(){this.logging=!0,this.request.success(this.success).error(this.error).send(this.data)},submit:{element:document.getElementById("login-submit"),init:function(){var e=this;this.element.on("touchstart",function(){e.element.className="touch"}),this.element.on("touchend",function(){e.element.className=""})}},init:function(){var e=this;this.request.method="post",this.request.json=!0,this.element.on("submit",function(t){t.preventDefault(),e.send(),t.preventDefault()}),this.submit.init()}},init:function(){this.form.init()}};pageLogin.init();